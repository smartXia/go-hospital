/*! 
 Build based on BAIDU 
 Time : 1716207707000 */
import{u as a,a as t,o as e,c as i,b as n,d as l,w as o,f as s,t as r,F as p,Q as c,g as d,R as u,j as m,E as B}from"./087AC4D233B64EB0index.5fcd1422.js";import{E as f}from"./087AC4D233B64EB0pagination.81705c9f.js";/* empty css                              *//* empty css                            */import"./087AC4D233B64EB0select.591b7648.js";import"./087AC4D233B64EB0scrollbar.b45aa0d9.js";/* empty css                               */import{E as C,a as g}from"./087AC4D233B64EB0table-column.de1f83f6.js";import"./087AC4D233B64EB0checkbox.2864820c.js";/* empty css                                *//* empty css                               */import{f as y,h as b,r as E}from"./087AC4D233B64EB0autoCode.61f04816.js";import{E as A}from"./087AC4D233B64EB0index.d064f019.js";import"./087AC4D233B64EB0isEqual.c192b418.js";import"./087AC4D233B64EB0_Uint8Array.72188c2c.js";import"./087AC4D233B64EB0index.71b3c6ca.js";import"./087AC4D233B64EB0strings.84714f21.js";import"./087AC4D233B64EB0debounce.679d5750.js";import"./087AC4D233B64EB0_baseIteratee.bf25bc12.js";import"./087AC4D233B64EB0index.508774e7.js";import"./087AC4D233B64EB0castArray.ef7e3470.js";import"./087AC4D233B64EB0_initCloneObject.67d0c1fc.js";const D={class:"gva-table-box"},j={class:"gva-btn-list"},w={class:"gva-pagination"},v=Object.assign({name:"AutoCodeAdmin"},{__name:"index",setup(v){const h=a(),x=t(1),k=t(0),_=t(10),T=t([]),z=a=>{_.value=a,I()},N=a=>{x.value=a,I()},I=async()=>{const a=await y({page:x.value,pageSize:_.value});0===a.code&&(T.value=a.data.list,k.value=a.data.total,x.value=a.data.page,_.value=a.data.pageSize)};I();const S=async(a,t)=>{t?u.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{u.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{u.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await E({id:Number(a.ID),deleteTable:t})).code&&(m.success("回滚成功"),I())}))}))})):u.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await E({id:Number(a.ID),deleteTable:t})).code&&(m.success("回滚成功"),I())}))},q=a=>{a?h.push({name:"autoCodeEdit",params:{id:a.ID}}):h.push({name:"autoCode"})};return(a,t)=>{const y=B,E=C,v=A,h=g,O=f;return e(),i("div",null,[n("div",D,[n("div",j,[l(y,{type:"primary",icon:"plus",onClick:t[0]||(t[0]=a=>q(null))},{default:o((()=>[s("新增")])),_:1})]),l(h,{data:T.value},{default:o((()=>[l(E,{type:"selection",width:"55"}),l(E,{align:"left",label:"id",width:"60",prop:"ID"}),l(E,{align:"left",label:"日期",width:"180"},{default:o((a=>[s(r(p(c)(a.row.CreatedAt)),1)])),_:1}),l(E,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),l(E,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),l(E,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),l(E,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:o((a=>[a.row.flag?(e(),d(v,{key:0,type:"danger",effect:"dark"},{default:o((()=>[s(" 已回滚 ")])),_:1})):(e(),d(v,{key:1,type:"success",effect:"dark"},{default:o((()=>[s(" 未回滚 ")])),_:1}))])),_:1}),l(E,{align:"left",label:"操作","min-width":"240"},{default:o((a=>[n("div",null,[l(y,{type:"primary",link:"",disabled:1===a.row.flag,onClick:t=>S(a.row,!0)},{default:o((()=>[s("回滚(删表)")])),_:2},1032,["disabled","onClick"]),l(y,{type:"primary",link:"",disabled:1===a.row.flag,onClick:t=>S(a.row,!1)},{default:o((()=>[s("回滚(不删表)")])),_:2},1032,["disabled","onClick"]),l(y,{type:"primary",link:"",onClick:t=>q(a.row)},{default:o((()=>[s("复用")])),_:2},1032,["onClick"]),l(y,{type:"primary",link:"",onClick:t=>(async a=>{u.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await b({id:Number(a.ID)})).code&&(m.success("删除成功"),I())}))})(a.row)},{default:o((()=>[s("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),n("div",w,[l(O,{"current-page":x.value,"page-size":_.value,"page-sizes":[10,30,50,100],total:k.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:N,onSizeChange:z},null,8,["current-page","page-size","total"])])])])}}});export{v as default};
