/*! 
 Build based on BAIDU 
 Time : 1716207707000 */
import{B as t,ad as e,v as n,D as a,W as o,a as r,X as s,V as i,Z as l,ax as u,o as c,c as d,A as m,G as p,J as v,K as f,af as B,ay as g,ag as x,r as A,ai as h,u as E,S as y,au as b,az as D,l as j,ak as C,P as w,F as k,g as M,e as I,d as z,b as L,n as S,w as N,a8 as T,av as _,H as R}from"./087AC4D233B64EB0index.5fcd1422.js";import P from"./087AC4D233B64EB0index.447c058d.js";import O from"./087AC4D233B64EB0index.e7f31129.js";import{u as W}from"./087AC4D233B64EB0index.a3898519.js";import F from"./087AC4D233B64EB0index.1d53cec2.js";import{_ as G}from"./087AC4D233B64EB0bottomInfo.ff56739c.js";/* empty css                                *//* empty css                               */import"./087AC4D233B64EB0index.b13bbc5a.js";import"./087AC4D233B64EB0menuItem.18e20e16.js";import"./087AC4D233B64EB0index.36b28121.js";import"./087AC4D233B64EB0index.fc2f110f.js";import"./087AC4D233B64EB0index.71b3c6ca.js";import"./087AC4D233B64EB0index.508774e7.js";import"./087AC4D233B64EB0asyncSubmenu.0964cca2.js";/* empty css                               */import"./087AC4D233B64EB0scrollbar.b45aa0d9.js";import"./087AC4D233B64EB0tools.39ee78aa.js";import"./087AC4D233B64EB0index.dac3bac5.js";import"./087AC4D233B64EB0drawer.6a894563.js";import"./087AC4D233B64EB0overlay.1520877c.js";/* empty css                            *//* empty css                              */import"./087AC4D233B64EB0input-number.f5afd020.js";import"./087AC4D233B64EB0index.c25afd12.js";import"./087AC4D233B64EB0switch.5175e219.js";import"./087AC4D233B64EB0position.18b59761.js";import"./087AC4D233B64EB0debounce.679d5750.js";import"./087AC4D233B64EB0index.d064f019.js";import"./087AC4D233B64EB0dialog.e17c90b5.js";import"./087AC4D233B64EB0index.1fd7855d.js";import"./087AC4D233B64EB0image-viewer.63f45130.js";import"./087AC4D233B64EB0dropdown.25dd4390.js";import"./087AC4D233B64EB0castArray.ef7e3470.js";import"./087AC4D233B64EB0tab-pane.20a0e58d.js";import"./087AC4D233B64EB0strings.84714f21.js";import"./087AC4D233B64EB0index.0de793c7.js";const H=t({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:e([String,Array]),default:"Element Plus"},font:{type:e(Object)},gap:{type:e(Array),default:()=>[100,100]},offset:{type:e(Array)}});function J(t,e,n=1){const a=document.createElement("canvas"),o=a.getContext("2d"),r=t*n,s=e*n;return a.setAttribute("width","".concat(r,"px")),a.setAttribute("height","".concat(s,"px")),o.save(),[o,a,r,s]}function K(){return function(t,e,n,a,o,r,s,i){const[l,u,c,d]=J(a,o,n);if(t instanceof HTMLImageElement)l.drawImage(t,0,0,c,d);else{const{color:e,fontSize:a,fontStyle:s,fontWeight:i,fontFamily:u,textAlign:d,textBaseline:m}=r,p=Number(a)*n;l.font="".concat(s," normal ").concat(i," ").concat(p,"px/").concat(o,"px ").concat(u),l.fillStyle=e,l.textAlign=d,l.textBaseline=m;const v=Array.isArray(t)?t:[t];null==v||v.forEach(((t,e)=>{l.fillText(null!=t?t:"",c/2,e*(p+3*n))}))}const m=Math.PI/180*Number(e),p=Math.max(a,o),[v,f,B]=J(p,p,n);v.translate(B/2,B/2),v.rotate(m),c>0&&d>0&&v.drawImage(u,-c/2,-d/2);let g=0,x=0,A=0,h=0;const E=c/2,y=d/2;[[0-E,0-y],[0+E,0-y],[0+E,0+y],[0-E,0+y]].forEach((([t,e])=>{const[n,a]=function(t,e){return[t*Math.cos(m)-e*Math.sin(m),t*Math.sin(m)+e*Math.cos(m)]}(t,e);g=Math.min(g,n),x=Math.max(x,n),A=Math.min(A,a),h=Math.max(h,a)}));const b=g+B/2,D=A+B/2,j=x-g,C=h-A,w=s*n,k=i*n,M=2*(j+w),I=C+k,[z,L]=J(M,I);function S(t=0,e=0){z.drawImage(f,b,D,j,C,t,e,j,C)}return S(),S(j+w,-C/2-k/2),S(j+w,+C/2+k/2),[L.toDataURL(),M/n,I/n]}}const Z=n({name:"ElWatermark"});const $=f(v(n({...Z,props:H,setup(t){const e=t,n={position:"relative"},v=a((()=>{var t,n;return null!=(n=null==(t=e.font)?void 0:t.color)?n:"rgba(0,0,0,.15)"})),f=a((()=>{var t,n;return null!=(n=null==(t=e.font)?void 0:t.fontSize)?n:16})),B=a((()=>{var t,n;return null!=(n=null==(t=e.font)?void 0:t.fontWeight)?n:"normal"})),g=a((()=>{var t,n;return null!=(n=null==(t=e.font)?void 0:t.fontStyle)?n:"normal"})),x=a((()=>{var t,n;return null!=(n=null==(t=e.font)?void 0:t.fontFamily)?n:"sans-serif"})),A=a((()=>{var t,n;return null!=(n=null==(t=e.font)?void 0:t.textAlign)?n:"center"})),h=a((()=>{var t,n;return null!=(n=null==(t=e.font)?void 0:t.textBaseline)?n:"top"})),E=a((()=>e.gap[0])),y=a((()=>e.gap[1])),b=a((()=>E.value/2)),D=a((()=>y.value/2)),j=a((()=>{var t,n;return null!=(n=null==(t=e.offset)?void 0:t[0])?n:b.value})),C=a((()=>{var t,n;return null!=(n=null==(t=e.offset)?void 0:t[1])?n:D.value})),w=()=>{const t={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let n=j.value-b.value,a=C.value-D.value;return n>0&&(t.left="".concat(n,"px"),t.width="calc(100% - ".concat(n,"px)"),n=0),a>0&&(t.top="".concat(a,"px"),t.height="calc(100% - ".concat(a,"px)"),a=0),t.backgroundPosition="".concat(n,"px ").concat(a,"px"),t},k=o(null),M=o(),I=r(!1),z=()=>{M.value&&(M.value.remove(),M.value=void 0)},L=(t,e)=>{var n;k.value&&M.value&&(I.value=!0,M.value.setAttribute("style",function(t){return Object.keys(t).map((e=>"".concat(function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}(e),": ").concat(t[e],";"))).join(" ")}({...w(),backgroundImage:"url('".concat(t,"')"),backgroundSize:"".concat(Math.floor(e),"px")})),null==(n=k.value)||n.append(M.value),setTimeout((()=>{I.value=!1})))},S=K(),N=()=>{const t=document.createElement("canvas").getContext("2d"),n=e.image,a=e.content,o=e.rotate;if(t){M.value||(M.value=document.createElement("div"));const r=window.devicePixelRatio||1,[s,i]=(t=>{let n=120,a=64;const o=e.image,r=e.content,s=e.width,i=e.height;if(!o&&t.measureText){t.font="".concat(Number(f.value),"px ").concat(x.value);const e=Array.isArray(r)?r:[r],o=e.map((e=>{const n=t.measureText(e);return[n.width,void 0!==n.fontBoundingBoxAscent?n.fontBoundingBoxAscent+n.fontBoundingBoxDescent:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent]}));n=Math.ceil(Math.max(...o.map((t=>t[0])))),a=Math.ceil(Math.max(...o.map((t=>t[1]))))*e.length+3*(e.length-1)}return[null!=s?s:n,null!=i?i:a]})(t),l=t=>{const[e,n]=S(t||"",o,r,s,i,{color:v.value,fontSize:f.value,fontStyle:g.value,fontWeight:B.value,fontFamily:x.value,textAlign:A.value,textBaseline:h.value},E.value,y.value);L(e,n)};if(n){const t=new Image;t.onload=()=>{l(t)},t.onerror=()=>{l(a)},t.crossOrigin="anonymous",t.referrerPolicy="no-referrer",t.src=n}else l(a)}};s((()=>{N()})),i((()=>e),(()=>{N()}),{deep:!0,flush:"post"}),l((()=>{z()}));return u(k,(t=>{I.value||t.forEach((t=>{((t,e)=>{let n=!1;return t.removedNodes.length&&e&&(n=Array.from(t.removedNodes).includes(e)),"attributes"===t.type&&t.target===e&&(n=!0),n})(t,M.value)&&(z(),N())}))}),{attributes:!0,subtree:!0,childList:!0}),(t,e)=>(c(),d("div",{ref_key:"containerRef",ref:k,style:p([n])},[m(t.$slots,"default")],4))}}),[["__file","watermark.vue"]]));const q=992;function U(t){const e=B();const n=W((function(){if(!document.hidden){const t=document.body.getBoundingClientRect().width-1<q;e.toggleDevice(t?"mobile":"desktop")}}),100);s((()=>{t&&n()})),g((()=>{!function(t,e,n,a=!1){t.addEventListener&&"function"==typeof t.addEventListener&&t.addEventListener(e,n,a)}(window,"resize",n)})),l((()=>{!function(t,e,n,a=!1){t.removeEventListener&&"function"==typeof t.removeEventListener&&t.removeEventListener(e,n,a)}(window,"resize",n)}))}const V={class:"bg-gray-50 text-slate-700 dark:text-slate-500 dark:bg-slate-800 w-screen h-screen"},X={class:"flex flex-row w-full gva-container pt-16"},Q={class:"flex-1 w-0 h-full"},Y={id:"gva-base-load-dom",class:"gva-body-h bg-gray-50 dark:bg-slate-800"},tt=Object.assign({name:"GvaLayout"},{__name:"index",setup(t){const e=B(),{config:n,theme:a}=x(e);U(!0);const o=A({color:"rgba(0, 0, 0, .15)"});h((()=>{o.color="dark"===a.value?"rgba(255,255,255, .15)":"rgba(0, 0, 0, .15)"}));const i=E(),l=y(),u=b();s((()=>{D.on("reload",f),m.loadingInstance&&m.loadingInstance.close()}));const m=j(),p=r(!0);let v=null;const f=async()=>{v&&window.clearTimeout(v),v=window.setTimeout((async()=>{if(l.meta.keepAlive)p.value=!1,await C(),p.value=!0;else{const t=l.meta.title;i.push({name:"Reload",params:{title:t}})}}),400)};return(t,e)=>{const a=$,r=w("router-view");return c(),d("div",V,[k(n).show_watermark?(c(),M(a,{key:0,font:o,"z-index":9999,gap:[180,150],class:"absolute inset-0 pointer-events-none",content:k(m).userInfo.nickName},null,8,["font","content"])):I("",!0),z(O),L("div",X,[z(P),L("div",Q,[k(n).showTabs?(c(),M(F,{key:0})):I("",!0),L("div",{class:S(["overflow-auto",k(n).showTabs?"gva-container2":"gva-container pt-1"])},[p.value?(c(),M(r,{key:0},{default:N((({Component:t})=>[L("div",Y,[z(T,{mode:"out-in",name:"el-fade-in-linear"},{default:N((()=>[(c(),M(_,{include:k(u).keepAliveRouters},[(c(),M(R(t)))],1032,["include"]))])),_:2},1024)])])),_:1})):I("",!0),z(G)],2)])])])}}});export{tt as default};
