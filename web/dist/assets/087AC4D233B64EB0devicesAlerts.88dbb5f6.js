/*! 
 Build based on BAIDU 
 Time : 1716207707000 */
import{a as e,r as l,P as a,o as t,c as d,b as r,d as o,w as i,f as u,m as n,t as s,F as p,Q as c,R as m,j as v,I as f,E as b,k as B}from"./087AC4D233B64EB0index.5fcd1422.js";import{E as h}from"./087AC4D233B64EB0drawer.6a894563.js";import"./087AC4D233B64EB0overlay.1520877c.js";/* empty css                              */import{E as g}from"./087AC4D233B64EB0pagination.81705c9f.js";/* empty css                            */import"./087AC4D233B64EB0select.591b7648.js";import"./087AC4D233B64EB0scrollbar.b45aa0d9.js";/* empty css                               */import{E as y,a as w}from"./087AC4D233B64EB0table-column.de1f83f6.js";import"./087AC4D233B64EB0checkbox.2864820c.js";/* empty css                                */import{a as C,E as A}from"./087AC4D233B64EB0form-item.69b26929.js";/* empty css                               */import{E as V}from"./087AC4D233B64EB0date-picker.75fecaf4.js";import{g as D,d as _,f as E,a as T,c as j,u as k}from"./087AC4D233B64EB0devicesAlerts.e5af415d.js";import{E as x}from"./087AC4D233B64EB0index.71b3c6ca.js";import"./087AC4D233B64EB0isEqual.c192b418.js";import"./087AC4D233B64EB0_Uint8Array.72188c2c.js";import"./087AC4D233B64EB0index.d064f019.js";import"./087AC4D233B64EB0strings.84714f21.js";import"./087AC4D233B64EB0debounce.679d5750.js";import"./087AC4D233B64EB0_baseIteratee.bf25bc12.js";import"./087AC4D233B64EB0index.508774e7.js";import"./087AC4D233B64EB0castArray.ef7e3470.js";import"./087AC4D233B64EB0_initCloneObject.67d0c1fc.js";import"./087AC4D233B64EB0_baseClone.bd09a709.js";import"./087AC4D233B64EB0arrays.2c626d3b.js";import"./087AC4D233B64EB0index.c25afd12.js";const U={class:"gva-search-box"},z={class:"gva-table-box"},I={class:"gva-btn-list"},S={class:"gva-pagination"},P={class:"flex justify-between items-center"},F={class:"text-lg"},M=Object.assign({name:"DevicesAlerts"},{__name:"devicesAlerts",setup(M){const R=e({receiver:"",deviceId:"",frpcPort:"",content:"",send:"",type:"",level:"",way:"",isDeleted:0,isSend:0,createTime:new Date,updateTime:new Date,upBandwidth:0,bizType:0}),q=l({}),O=l({createdAt:[{validator:(e,l,a)=>{N.value.startCreatedAt&&!N.value.endCreatedAt?a(new Error("请填写结束日期")):!N.value.startCreatedAt&&N.value.endCreatedAt?a(new Error("请填写开始日期")):N.value.startCreatedAt&&N.value.endCreatedAt&&(N.value.startCreatedAt.getTime()===N.value.endCreatedAt.getTime()||N.value.startCreatedAt.getTime()>N.value.endCreatedAt.getTime())?a(new Error("开始日期应当早于结束日期")):a()},trigger:"change"}]}),Q=e(),K=e(),G=e(1),H=e(0),J=e(10),L=e([]),N=e({}),W=()=>{N.value={},$()},X=()=>{var e;null==(e=K.value)||e.validate((async e=>{e&&(G.value=1,J.value=10,$())}))},Y=e=>{J.value=e,$()},Z=e=>{G.value=e,$()},$=async()=>{const e=await D({page:G.value,pageSize:J.value,...N.value});0===e.code&&(L.value=e.data.list,H.value=e.data.total,G.value=e.data.page,J.value=e.data.pageSize)};$();(async()=>{})();const ee=e([]),le=e=>{ee.value=e},ae=async()=>{m.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=[];if(0===ee.value.length)return void v({type:"warning",message:"请选择要删除的数据"});ee.value&&ee.value.map((l=>{e.push(l.ID)}));0===(await _({IDs:e})).code&&(v({type:"success",message:"删除成功"}),L.value.length===e.length&&G.value>1&&G.value--,$())}))},te=e(""),de=async e=>{0===(await T({ID:e.ID})).code&&(v({type:"success",message:"删除成功"}),1===L.value.length&&G.value>1&&G.value--,$())},re=e(!1),oe=()=>{te.value="create",re.value=!0},ie=()=>{re.value=!1,R.value={receiver:"",deviceId:"",frpcPort:"",content:"",send:"",type:"",level:"",way:"",isDeleted:0,isSend:0,createTime:new Date,updateTime:new Date,upBandwidth:0,bizType:0}},ue=async()=>{var e;null==(e=Q.value)||e.validate((async e=>{if(!e)return;let l;switch(te.value){case"create":default:l=await j(R.value);break;case"update":l=await k(R.value)}0===l.code&&(v({type:"success",message:"创建/更改成功"}),ie(),$())}))};return(e,l)=>{const v=a("QuestionFilled"),D=f,_=x,T=V,j=C,k=b,M=A,$=y,ne=w,se=g,pe=B,ce=h;return t(),d("div",null,[r("div",U,[o(M,{ref_key:"elSearchFormRef",ref:K,inline:!0,model:N.value,class:"demo-form-inline",rules:O,onKeyup:n(X,["enter"])},{default:i((()=>[o(j,{label:"创建日期",prop:"createdAt"},{label:i((()=>[r("span",null,[u(" 创建日期 "),o(_,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:i((()=>[o(D,null,{default:i((()=>[o(v)])),_:1})])),_:1})])])),default:i((()=>[o(T,{modelValue:N.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>N.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!N.value.endCreatedAt&&e.getTime()>N.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),u(" — "),o(T,{modelValue:N.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>N.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!N.value.startCreatedAt&&e.getTime()<N.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),o(j,null,{default:i((()=>[o(k,{type:"primary",icon:"search",onClick:X},{default:i((()=>[u("查询")])),_:1}),o(k,{icon:"refresh",onClick:W},{default:i((()=>[u("重置")])),_:1})])),_:1})])),_:1},8,["model","rules"])]),r("div",z,[r("div",I,[o(k,{type:"primary",icon:"plus",onClick:oe},{default:i((()=>[u("新增")])),_:1}),o(k,{icon:"delete",style:{"margin-left":"10px"},disabled:!ee.value.length,onClick:ae},{default:i((()=>[u("删除")])),_:1},8,["disabled"])]),o(ne,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:L.value,"row-key":"ID",onSelectionChange:le},{default:i((()=>[o($,{type:"selection",width:"55"}),o($,{align:"left",label:"日期",width:"180"},{default:i((e=>[u(s(p(c)(e.row.CreatedAt)),1)])),_:1}),o($,{align:"left",label:"接收者uid",prop:"receiver",width:"120"}),o($,{align:"left",label:"设备id",prop:"deviceId",width:"120"}),o($,{align:"left",label:"端口号",prop:"frpcPort",width:"120"}),o($,{align:"left",label:"报警内容",prop:"content",width:"120"}),o($,{align:"left",label:"发送者",prop:"send",width:"120"}),o($,{align:"left",label:"报警类型",prop:"type",width:"120"}),o($,{align:"left",label:"报警等级",prop:"level",width:"120"}),o($,{align:"left",label:"报警途径",prop:"way",width:"120"}),o($,{align:"left",label:"isDeleted字段",prop:"isDeleted",width:"120"}),o($,{align:"left",label:"isSend字段",prop:"isSend",width:"120"}),o($,{align:"left",label:"createTime字段",width:"180"},{default:i((e=>[u(s(p(c)(e.row.createTime)),1)])),_:1}),o($,{align:"left",label:"updateTime字段",width:"180"},{default:i((e=>[u(s(p(c)(e.row.updateTime)),1)])),_:1}),o($,{align:"left",label:"upBandwidth字段",prop:"upBandwidth",width:"120"}),o($,{align:"left",label:"bizType字段",prop:"bizType",width:"120"}),o($,{align:"left",label:"操作",fixed:"right","min-width":"240"},{default:i((e=>[o(k,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:l=>(async e=>{const l=await E({ID:e.ID});te.value="update",0===l.code&&(R.value=l.data.redevicesAlerts,re.value=!0)})(e.row)},{default:i((()=>[u("变更")])),_:2},1032,["onClick"]),o(k,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void m.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{de(a)}));var a}},{default:i((()=>[u("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),r("div",S,[o(se,{layout:"total, sizes, prev, pager, next, jumper","current-page":G.value,"page-size":J.value,"page-sizes":[10,30,50,100],total:H.value,onCurrentChange:Z,onSizeChange:Y},null,8,["current-page","page-size","total"])])]),o(ce,{"destroy-on-close":"",size:"800",modelValue:re.value,"onUpdate:modelValue":l[16]||(l[16]=e=>re.value=e),"show-close":!1,"before-close":ie},{header:i((()=>[r("div",P,[r("span",F,s("create"===te.value?"添加":"修改"),1),r("div",null,[o(k,{type:"primary",onClick:ue},{default:i((()=>[u("确 定")])),_:1}),o(k,{onClick:ie},{default:i((()=>[u("取 消")])),_:1})])])])),default:i((()=>[o(M,{model:R.value,"label-position":"top",ref_key:"elFormRef",ref:Q,rules:q,"label-width":"80px"},{default:i((()=>[o(j,{label:"接收者uid:",prop:"receiver"},{default:i((()=>[o(pe,{modelValue:R.value.receiver,"onUpdate:modelValue":l[2]||(l[2]=e=>R.value.receiver=e),clearable:!0,placeholder:"请输入接收者uid"},null,8,["modelValue"])])),_:1}),o(j,{label:"设备id:",prop:"deviceId"},{default:i((()=>[o(pe,{modelValue:R.value.deviceId,"onUpdate:modelValue":l[3]||(l[3]=e=>R.value.deviceId=e),clearable:!0,placeholder:"请输入设备id"},null,8,["modelValue"])])),_:1}),o(j,{label:"端口号:",prop:"frpcPort"},{default:i((()=>[o(pe,{modelValue:R.value.frpcPort,"onUpdate:modelValue":l[4]||(l[4]=e=>R.value.frpcPort=e),clearable:!0,placeholder:"请输入端口号"},null,8,["modelValue"])])),_:1}),o(j,{label:"报警内容:",prop:"content"},{default:i((()=>[o(pe,{modelValue:R.value.content,"onUpdate:modelValue":l[5]||(l[5]=e=>R.value.content=e),clearable:!0,placeholder:"请输入报警内容"},null,8,["modelValue"])])),_:1}),o(j,{label:"发送者:",prop:"send"},{default:i((()=>[o(pe,{modelValue:R.value.send,"onUpdate:modelValue":l[6]||(l[6]=e=>R.value.send=e),clearable:!0,placeholder:"请输入发送者"},null,8,["modelValue"])])),_:1}),o(j,{label:"报警类型:",prop:"type"},{default:i((()=>[o(pe,{modelValue:R.value.type,"onUpdate:modelValue":l[7]||(l[7]=e=>R.value.type=e),clearable:!0,placeholder:"请输入报警类型"},null,8,["modelValue"])])),_:1}),o(j,{label:"报警等级:",prop:"level"},{default:i((()=>[o(pe,{modelValue:R.value.level,"onUpdate:modelValue":l[8]||(l[8]=e=>R.value.level=e),clearable:!0,placeholder:"请输入报警等级"},null,8,["modelValue"])])),_:1}),o(j,{label:"报警途径:",prop:"way"},{default:i((()=>[o(pe,{modelValue:R.value.way,"onUpdate:modelValue":l[9]||(l[9]=e=>R.value.way=e),clearable:!0,placeholder:"请输入报警途径"},null,8,["modelValue"])])),_:1}),o(j,{label:"isDeleted字段:",prop:"isDeleted"},{default:i((()=>[o(pe,{modelValue:R.value.isDeleted,"onUpdate:modelValue":l[10]||(l[10]=e=>R.value.isDeleted=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入isDeleted字段"},null,8,["modelValue"])])),_:1}),o(j,{label:"isSend字段:",prop:"isSend"},{default:i((()=>[o(pe,{modelValue:R.value.isSend,"onUpdate:modelValue":l[11]||(l[11]=e=>R.value.isSend=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入isSend字段"},null,8,["modelValue"])])),_:1}),o(j,{label:"createTime字段:",prop:"createTime"},{default:i((()=>[o(T,{modelValue:R.value.createTime,"onUpdate:modelValue":l[12]||(l[12]=e=>R.value.createTime=e),type:"date",style:{width:"100%"},placeholder:"选择日期",clearable:!0},null,8,["modelValue"])])),_:1}),o(j,{label:"updateTime字段:",prop:"updateTime"},{default:i((()=>[o(T,{modelValue:R.value.updateTime,"onUpdate:modelValue":l[13]||(l[13]=e=>R.value.updateTime=e),type:"date",style:{width:"100%"},placeholder:"选择日期",clearable:!0},null,8,["modelValue"])])),_:1}),o(j,{label:"upBandwidth字段:",prop:"upBandwidth"},{default:i((()=>[o(pe,{modelValue:R.value.upBandwidth,"onUpdate:modelValue":l[14]||(l[14]=e=>R.value.upBandwidth=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入upBandwidth字段"},null,8,["modelValue"])])),_:1}),o(j,{label:"bizType字段:",prop:"bizType"},{default:i((()=>[o(pe,{modelValue:R.value.bizType,"onUpdate:modelValue":l[15]||(l[15]=e=>R.value.bizType=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入bizType字段"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{M as default};
